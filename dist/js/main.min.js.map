{"version":3,"sources":["main.js"],"names":["Site","mobileThreshold","init","_this","this","$","window","resize","onResize","document","ready","Masonry","Enquery","fixWidows","each","string","html","replace","$forms","length","bind","on","submit","e","preventDefault","data","serializeArray","reduce","obj","item","name","value","submitForm","form","from","copy","warnInvalid","unwarnInvalid","makeRequest","find","attr","addClass","removeClass","requestData","action","nonce","ajax","url","WP","ajaxUrl","type","success","response","status","handleResponse","handleError","error","$form","console","log","text","message","$container","instance","undefined","createInstance","itemSelector","transitionDuration","imagesLoaded","layout","index"],"mappings":"AAGAA,MACEC,gBAAiB,IACjBC,KAAM,WACJ,GAAIC,GAAQC,IAEZC,GAAEC,QAAQC,OAAO,WACfJ,EAAMK,aAGRH,EAAEI,UAAUC,MAAM,cAIlBV,KAAKW,QAAQT,OACbF,KAAKY,QAAQV,QAIfM,SAAU,aAKVK,UAAW,WAETR,EAAE,kBAAkBS,KAAK,WACvB,GAAIC,GAASV,EAAED,MAAMY,MACrBD,GAASA,EAAOE,QAAQ,YAAY,YACpCZ,EAAED,MAAMY,KAAKD,OAKnBf,KAAKY,SACHM,OAAQb,EAAE,iBACVH,KAAM,WACJ,GAAIC,GAAQC,IAERD,GAAMe,OAAOC,QACfhB,EAAMiB,QAKVA,KAAM,WACJ,GAAIjB,GAAQC,IAEZD,GAAMe,OAAOG,IACXC,OAAU,SAASC,GACjBA,EAAEC,gBAEF,IAAIC,GAAOpB,EAAED,MAAMsB,iBAAiBC,OAAO,SAASC,EAAKC,GAEvD,MADAD,GAAIC,EAAKC,MAAQD,EAAKE,MACfH,MAGTzB,GAAM6B,WAAW5B,KAAMqB,OAM7BO,WAAY,SAASC,EAAMR,GACzB,GAAItB,GAAQC,IAGM,MAAdqB,EAAKS,MAA6B,KAAdT,EAAKU,KAC3BhC,EAAMiC,YAAYH,IAElB9B,EAAMkC,cAAcJ,GACpB9B,EAAMmC,YAAYb,EAAMQ,GACxB5B,EAAE4B,GAAMM,KAAK,sBAAsBC,KAAK,WAAY,cAIxDJ,YAAa,SAASH,GACpB5B,EAAE4B,GAAMQ,SAAS,YAGnBJ,cAAe,SAASJ,GACtB5B,EAAE4B,GAAMS,YAAY,YAGtBJ,YAAa,SAASb,EAAMQ,GAC1B,GAAI9B,GAAQC,KACRuC,GACFC,OAAU,eACVC,MAASpB,EAAKoB,MACdpB,KAAQA,EAGVpB,GAAEyC,MACAC,IAAKC,GAAGC,QACRC,KAAM,OACNzB,KAAMkB,EACNQ,QAAS,SAASC,EAAUC,GAC1BlD,EAAMmD,eAAeF,EAAUC,EAAQpB,OAK7CqB,eAAgB,SAASF,EAAUC,EAAQpB,GACzC,GAAI9B,GAAQC,IAEU,WAAlBgD,EAASF,KACX/C,EAAMoD,YAAYH,EAASI,MAAOvB,GACP,YAAlBmB,EAASF,MAClB7C,EAAE4B,GAAMQ,SAAS,WAKrBc,YAAa,SAASC,EAAOvB,GAC3B,GACIwB,GAAQpD,EAAE4B,EAEdyB,SAAQC,IAAI,SAAUH,GAEtBC,EAAMhB,SAAS,SACfgB,EAAMlB,KAAK,kBAAkBqB,KAAKJ,EAAMK,WAI5C7D,KAAKW,SACHmD,WAAYzD,EAAE,sBACd0D,SAAUC,OAEV9D,KAAM,WACJ,GAAIC,GAAQC,IAERD,GAAM2D,WAAW3C,QACnBhB,EAAM8D,kBAIVA,eAAgB,WACd,GAAI9D,GAAQC,IAEZD,GAAM4D,SAAW,GAAIpD,SAAQR,EAAM2D,WAAW,IAC5CI,aAAc,aACdC,mBAAoB,IAGtBhE,EAAM2D,WAAWM,aAAa,WAC5BjE,EAAM4D,SAASM,WAGjBlE,EAAM2D,WAAWvB,KAAK,OAAOzB,KAAK,SAASwD,EAAOzC,GAChDxB,EAAEwB,GAAMR,GAAG,OAAQ,WACjBlB,EAAM4D,SAASM,eAOvBrE,KAAKE","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, document, Site */\n\nSite = {\n  mobileThreshold: 601,\n  init: function() {\n    var _this = this;\n\n    $(window).resize(function(){\n      _this.onResize();\n    });\n\n    $(document).ready(function () {\n\n    });\n\n    Site.Masonry.init();\n    Site.Enquery.init();\n\n  },\n\n  onResize: function() {\n    var _this = this;\n\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n};\n\nSite.Enquery = {\n  $forms: $('.contact-form'),\n  init: function() {\n    var _this = this;\n\n    if (_this.$forms.length) {\n      _this.bind();\n    }\n\n  },\n\n  bind: function() {\n    var _this = this;\n\n    _this.$forms.on({\n      'submit': function(e) {\n        e.preventDefault();\n\n        var data = $(this).serializeArray().reduce(function(obj, item) {\n          obj[item.name] = item.value;\n          return obj;\n        }, {});\n\n        _this.submitForm(this, data);\n\n      }\n    })\n  },\n\n  submitForm: function(form, data) {\n    var _this = this;\n\n    // validate and notify\n    if (data.from === '' || data.copy === '') {\n      _this.warnInvalid(form);\n    } else {\n      _this.unwarnInvalid(form);\n      _this.makeRequest(data, form);\n      $(form).find('input[type=submit]').attr('disabled', 'disabled');\n    }\n  },\n\n  warnInvalid: function(form) {\n    $(form).addClass('invalid');\n  },\n\n  unwarnInvalid: function(form) {\n    $(form).removeClass('invalid');\n  },\n\n  makeRequest: function(data, form) {\n    var _this = this;\n    var requestData = {\n      'action': 'send_enquiry',\n      'nonce': data.nonce,\n      'data': data\n    };\n\n    $.ajax({\n      url: WP.ajaxUrl,\n      type: 'post',\n      data: requestData,\n      success: function(response, status) {\n        _this.handleResponse(response, status, form);\n      }\n    });\n  },\n\n  handleResponse: function(response, status, form) {\n    var _this = this;\n\n    if (response.type === 'error') {\n      _this.handleError(response.error, form);\n    } else if (response.type === 'success') {\n      $(form).addClass('thanks');\n    }\n\n  },\n\n  handleError: function(error, form) {\n    var _this = this;\n    var $form = $(form);\n\n    console.log('Error!', error);\n\n    $form.addClass('error');\n    $form.find('.error-message').text(error.message);\n  }\n};\n\nSite.Masonry = {\n  $container: $('#masonry-container'),\n  instance: undefined,\n\n  init: function() {\n    var _this = this;\n\n    if (_this.$container.length) {\n      _this.createInstance();\n    }\n  },\n\n  createInstance: function() {\n    var _this = this;\n\n    _this.instance = new Masonry(_this.$container[0], {\n      itemSelector: '.grid-item',\n      transitionDuration: 0,\n    });\n\n    _this.$container.imagesLoaded(function() {\n      _this.instance.layout();\n    });\n\n    _this.$container.find('img').each(function(index, item) {\n      $(item).on('load', function() {\n        _this.instance.layout();\n      });\n    });\n\n  }\n};\n\nSite.init();"]}